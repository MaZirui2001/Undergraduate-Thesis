# 主修答辩讲稿

尊敬的各位评委老师：

​	大家上午好！

​	我是计算机学院的本科生马子睿，今天我为大家带来题目为《基于龙芯架构32位精简版指令集的超标量处理器设计》的论文答辩。

​	首先，请允许我介绍一下论文的基本情况。本论文由我本人独立完成，我的教师为计算机实验中心实验师卢建良老师，和中科院计算所研究员叶笑春老师。

​	本次答辩我将从以下四个方面开展。

​	首先，我将介绍一下本文研究背景。

​	在处理器设计领域，超标量技术是如今业界公认的优秀设计，其核心是使处理器能在一个机器周期内尽可能多地并行执行多条指令，而这一设计也在以下这四个方面体现出了较大优势。

​	但当超标量技术和常见的流水线技术结合起来，会导致处理器的流水线较深，因此分支指令的预测失败会导致更多的流水线冲刷。目前业界主要存在两种优化方法：其一是对分支预测技术进行优化，另一种方法则是对分支恢复进行优化。本文探讨的创新点将主要围绕第二点展开。

​	接下来我将介绍我个人的主要研究工作。

​	首先是我的工作核心——超标量处理器的设计。该处理器基于带旁路的Tomasulo算法，采用四发射、乱序执行、顺序写回的结构，共有9~11级流水线，支持LA32R中的所有基础指令和特权指令。

​	针对目前国内，超标量处理器进行测试的仿真器，较为稀缺的问题，我基于Verilator开发了一款支持多种重要仿真技术的仿真器。该仿真器主要面向硬件，能够对超标量处理器的各类指标进行采样，并提供了一定的可扩展性。

​	随后是本文对预译码技术的创新改进点。预译码技术旨在，能够尽早利用指令信息对分支预测结果进行检查，减少流水线分支预测失败的惩罚。但在实际实现中，预译码技术主要会遇到如下三个问题。为了折中地解决这三个问题，我借鉴了高通公司的一种跳转码嵌入技术。

​	由于高通公司提供的技术描述非常有限，因此我对这种技术的具体实现进行了一定的推测。可以从下面的图中看到，在改进的设计中，我在主存返回指令到Cache的同时，立刻对其进行初步译码，并对其分支地址进行计算，使用其低位替换掉立即数位，并存入地址高位是否需要变化的信息，从而实现了这一种技术在预译码上的优化。

​	最后，为了能够对整体系统做电路时序测试，我搭建了较为完整的片上系统，该系统由DDR作为主存，使用AXI4总线进行数据传输，并支持了串口和时钟两种外设，其中串口输入可以向处理器发送中断信息。

​	下面我将介绍本文的研究成果与结论。

​	首先是处理器系统的正确性验证。我从龙芯教学平台Chiplab移植了汇编程序测试，随后又从Nemu开源模拟器的官方测试中移植了高级语言程序测试，均成功通过。

​	之后是引入预译码改进技术后对于分支效果的改进，其中表中的预测效果是带预译码的分支预测的总预测正确率。可以发现，特别是在这类函数调用指令的预测上，由于预译码可以在指令码上得到全部的信息，所以可以达到100%的正确率，是较为重要的提升。

​	接下来我们进行一个综合对比，将我的处理器与龙芯杯竞赛第六届亚军和第七届特等奖进行了横向对比，可以看到，在通用性能测试程序中，我的处理器都在执行效率上明显优于这些获奖作品。

​	最后我们来看一下处理器系统的综合实现性能。当我在处理器上使用前文所述的技术后，处理器主频达到了120MHz，而前文所述的特等奖作品仅为107.25MHz，这也能看出本文创新点对整体性能的提升是较为明显的。

​	最后我将介绍我的总结与展望。

​	我的项目成果主要体现在四个方面。其一，该处理器、仿真环境、片上系统的源代码都已经在Github社区中开源，为国内外硬件爱好者提供了一个交流的平台，且在较短时间内已经获得了17个关注。

​	其二，本项目的实验框架已经在计算机学院系统结构核心课程中广泛应用。本学年该项目的仿真框架已经通过课程实验向大二、大三、大四三个年级的同学开放使用，进一步为计算机实验中心服务。

​	其三，在即将到来的第八届“龙芯杯”大赛中，该处理器设计已经成为中国科学院大学“一生一芯”项目参赛队和中国科大若干参赛队的参考设计，为国内系统结构教学、科研都提供了有力的支持。

​	其四，该预译码衍生技术已经实装于中科睿芯集团中科通量公司RVC处理器测试版，并通过了初步流片测试，计划于2024年12月进行流片。

​	在未来，我将继续对这个项目进行开发，主要将从分支预测、多端口高速缓存两个方面进行性能改进，并进一步完善设计的完备性，力争能在未来流片成功。

​	我的汇报到此结束，非常感谢各位老师的聆听，请各位老师批评指正，谢谢！